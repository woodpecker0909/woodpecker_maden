<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ë¶™ë°•ì´ì¥ ìë™ ì„¤ê³„ ê³„ì‚°ê¸° v10 (í†µ ë°€ì°© Â· ìƒ‰ìƒ ì‹œí€€ìŠ¤)</title>
  <style>
    :root{
      --bg:#f5f7fb; --text:#1f2937; --muted:#6b7280; --line:#e5e7eb;
      --brand:#0f7bff; --chip-bg:#eef2ff; --chip-bd:#c7d2fe; --chip-tx:#1e3a8a;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans KR",sans-serif}
    .container{max-width:1000px;margin:0 auto;padding:20px 14px 170px}
    .card{background:#fff;border:1px solid var(--line);border-radius:14px;padding:16px;margin-bottom:16px;box-shadow:0 4px 12px rgba(0,0,0,.05)}
    h1{margin:0 0 8px;font-size:20px}
    h2{margin:0 0 12px;font-size:16px}
    .muted{color:var(--muted);font-size:13px}
    .btn{border:0;border-radius:8px;background:var(--brand);color:#fff;padding:8px 12px;font-size:14px;cursor:pointer}
    .btn.ghost{background:#fff;color:var(--brand);border:1px solid var(--brand)}
    .ok{color:#087443}.warn{color:#b00020}
    .slot{border:1px solid #e5f0f5;border-radius:12px;padding:10px;margin-bottom:12px}
    .slot h3{margin:0 0 8px;font-size:14px;display:flex;justify-content:space-between;align-items:center}
    .chip{font-size:11px;padding:2px 8px;border-radius:999px;background:var(--chip-bg);color:var(--chip-tx);border:1px solid var(--chip-bd)}
    .thumb-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .thumb{border:2px solid transparent;border-radius:10px;overflow:hidden;background:#fff;cursor:pointer}
    .thumb img{display:block;width:100%;height:auto}
    .thumb.active{border-color:#2563eb;box-shadow:0 0 0 3px rgba(37,99,235,.2)}
    .seq{background:#fff;border:1px solid var(--line);border-radius:10px;padding:10px;font-family:ui-monospace,Consolas,monospace;font-size:14px;line-height:1.5}
    .checks{display:flex;gap:12px;flex-wrap:wrap;margin:6px 0 8px}
    label.inline{display:flex;align-items:center;gap:8px}
    input[type="number"]{width:100%;padding:8px;border:1px solid #cbd5e1;border-radius:8px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media (max-width:760px){.row{grid-template-columns:1fr}}
    .preview-wrap{display:flex;flex-direction:column;gap:8px}
    .preview-box{background:#fff;border:1px solid var(--line);border-radius:12px;min-height:120px;display:flex;justify-content:center;align-items:center;overflow:auto;padding:10px}
    .sticky-bar{position:fixed;left:0;right:0;bottom:0;background:rgba(255,255,255,.96);border-top:1px solid var(--line);backdrop-filter:blur(6px);padding:10px 14px;display:grid;grid-template-columns:1fr auto;gap:10px;align-items:center}
    .summary-line{margin:6px 0}
    .note-list{margin:6px 0 0 0; padding-left:18px; color:#374151; font-size:13px}
    .note-list .red{color:#d00000; font-weight:600}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>ğŸ“ ë¶™ë°•ì´ì¥ ìë™ ì„¤ê³„ ê³„ì‚°ê¸° v10</h1>
      <div class="muted"><b>ì‹¤ì œ í­(mm) ë¹„ìœ¨</b> Â· <b>í°ì¥ ë„ì–´ ì¤‘ì•™ 3mm ì ì„ </b> Â· <b>ì‘ì€ì¥: ë†’ì´ ë™ì¼Â·í­ ì ˆë°˜</b> Â· <b>ë¯¸ë¦¬ë³´ê¸°: í†µë¼ë¦¬ ì™„ì „ ë°€ì°©</b></div>
    </div>

    <div class="card">
      <h2>ì…ë ¥</h2>
      <div class="summary-line">
        <label>ë²½ ì „ì²´ ê¸¸ì´ (mm)<br/>
          <input id="wall" type="number" value="3700" min="1000" placeholder="ì˜ˆ: 3700">
        </label>
      </div>

      <div class="summary-line">
        <b>í—ˆìš© ì„¸íŠ¸</b>
        <div class="checks">
          <label class="inline"><input type="checkbox" id="set105" checked> 1000 + 500</label>
          <label class="inline"><input type="checkbox" id="set945" checked> 900 + 450</label>
          <label class="inline"><input type="checkbox" id="set840" checked> 800 + 400</label>
        </div>
      </div>

      <div class="summary-line">
        <b>ì¶”ê°€ ì˜µì…˜</b>
        <div class="checks">
          <label class="inline"><input type="checkbox" id="pairRequired"> ì§ í•„ìˆ˜(í°ì¥+ì‘ì€ì¥ ë™ì‹œ)</label>
          <label class="inline"><input type="checkbox" id="onlyOddDoors"> í™€ìˆ˜ ë„ì–´ë§Œ</label>
        </div>
      </div>

      <button class="btn" id="calcBtn">ê³„ì‚°í•˜ê¸°</button>
      <div id="summary" style="margin-top:10px;"></div>
    </div>

    <div class="card" id="designCard" style="display:none;">
      <h2>ë””ìì¸ ì„ íƒ (A~I)</h2>
      <div class="row">
        <div><div id="slotsWrap"></div></div>

        <div class="preview-wrap">
          <div><b>ë¯¸ë‹ˆ ì¡°ë¦½ ë¯¸ë¦¬ë³´ê¸°</b></div>
          <div class="preview-box"><canvas id="previewCanvas"></canvas></div>
          <div class="muted">ì¢Œ/ìš° ì„œë¼ìš´ë“œ, ê° í†µ í­(mm) í‘œê¸° Â· í°ì¥ ë„ì–´ ì¤‘ì•™ <b>3mm</b> ì ì„ ë§Œ ì‹œê°í™” Â· í†µë¼ë¦¬ëŠ” ì™„ì „ ë°€ì°©</div>

          <div style="margin-top:12px;">
            <label>ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ ì…ë ¥ìš©(ìƒ‰ìƒ ì•ˆë‚´ Â· ê³µë°± ì—†ìŒ)</label>
            <div id="sequenceBoxCompactColored" class="seq">-</div>
            <!-- ì‹¤ì œë¡œ ë³µì‚¬ë  ìˆœìˆ˜ ë¬¸ìì—´(ìƒ‰ìƒ ì—†ìŒ) -->
            <div id="sequenceBoxCompactCopy" style="display:none;">-</div>
            <div style="display:flex;gap:8px;align-items:center;margin-top:8px;">
              <button class="btn" onclick="copyCompact()">ë³µì‚¬</button>
            </div>
            <ul class="note-list">
              <li><b>ë³µì‚¬í•œ ê²°ê³¼</b>ëŠ” ìƒí’ˆ ì˜µì…˜ <b>ì²« ì¹¸(ì‚¬ì´ì¦ˆ&ë””ìì¸ êµ¬ì„±)</b>ì— ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”.</li>
              <li><span class="red">ë¹¨ê°„ìƒ‰</span>ìœ¼ë¡œ í‘œì‹œëœ <b>í†µ(ì˜ˆ: 9A, 9Fâ€¦)</b>ë§Œ ì¥ë°”êµ¬ë‹ˆì— ìˆœì„œëŒ€ë¡œ ë‹´ì•„ ì£¼ì„¸ìš”. <span class="muted">(L/Rì€ ì„œë¼ìš´ë“œë¼ ë‹´ì§€ ì•ŠìŒ)</span></li>
            </ul>
            <div class="muted" style="margin-top:6px;">
              <b style="color:#111">ê²€ì •</b>=ì¢Œ/ìš° ì„œë¼ìš´ë“œ,&nbsp;
              <b style="color:#d00000">ë¹¨ê°•</b>=ê° í†µ(ìˆ«ì+ì•ŒíŒŒë²³) Â· ì˜ˆ) <span style="color:#111">50L</span>-<span style="color:#d00000">9A</span>-<span style="color:#d00000">9F</span>-<span style="color:#d00000">9E</span>-<span style="color:#d00000">9I</span>-<span style="color:#111">50R</span>
            </div>
          </div>

          <div style="margin-top:8px;">
            <button class="btn" onclick="downloadPreview()">ìµœì¢…ì´ë¯¸ì§€ ì €ì¥</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="sticky-bar">
    <div class="muted">ê³„ì‚° â†’ ì¶”ì²œì•ˆ ì„ íƒ â†’ ë””ìì¸ ì„ íƒ â†’ ìƒ‰ìƒ ì‹œí€€ìŠ¤ ë³µì‚¬ & ë¯¸ë¦¬ë³´ê¸° ì €ì¥</div>
    <button class="btn" onclick="calculate()">ë‹¤ì‹œ ê³„ì‚°</button>
  </div>

<script>
  // ====== ì„¤ì • ======
  const MIN_SURROUND = 40;       // ì„œë¼ìš´ë“œ ìµœì†Œ 40mm
  const LEFTOVER_TIE_MM = 20;    // ë™ë¥  íŒì • í—ˆìš© ì˜¤ì°¨
  const DOOR_GAP_MM = 3;         // í°ì¥ ì¤‘ì•™ ê°€ìƒ ë„ì–´ ê°„ê²©
  const UNIT_GAP_PX = 0;         // â˜… í†µ ì‚¬ì´ ì—¬ë°±(í”½ì…€) = 0 â†’ ì™„ì „ ë°€ì°©

  // ì„¸íŠ¸(í°ì¥+ì‘ì€ì¥)
  const SETS = [
    { id:"set105", name:"1000+500", big:1000, small:500, priority:0 }, // 1000 ìš°ì„ 
    { id:"set945", name:"900+450",  big:900,  small:450, priority:1 },
    { id:"set840", name:"800+400",  big:800,  small:400, priority:2 },
  ];

  // ë””ìì¸ ëª©ë¡
  const LETTERS_BIG   = ["A","B","C","D","E","F","G","H","I"];
  const LETTERS_SMALL = ["A","B","C","G","H","I"]; // ì‘ì€ì¥: D,E,F ì œì™¸
  // ê¸°ë³¸ ì¸ë„¤ì¼(í°ì¥) ë§¤í•‘
  const THUMBS_BIG = Object.fromEntries(LETTERS_BIG.map(ch => [ch, `design_${ch}.png`]));

  let topRows=[], selections=[], currentPlan=null;

  document.getElementById('calcBtn').addEventListener('click', calculate);
  document.getElementById('wall').addEventListener('keydown', e=>{ if(e.key==='Enter') calculate(); });

  function calculate(){
    const wall=parseInt(document.getElementById('wall').value,10);
    const pairRequired=document.getElementById('pairRequired').checked;
    const onlyOdd=document.getElementById('onlyOddDoors').checked;
    const summary=document.getElementById('summary'); summary.innerHTML=""; document.getElementById('designCard').style.display="none";
    if(!wall||wall<1000){summary.innerHTML="<div class='warn'>âš ï¸ 1000mm ì´ìƒ ì…ë ¥</div>";return;}

    const enabledSets=SETS.filter(s=>document.getElementById(s.id).checked);
    if(enabledSets.length===0){summary.innerHTML="<div class='warn'>âš ï¸ ìµœì†Œ 1ê°œ ì„¸íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”.</div>";return;}

    let rows=[];
    for(const set of enabledSets){
      for(let bc=0;bc<=14;bc++){
        for(let sc=0;sc<=14;sc++){
          if(bc===0&&sc===0)continue;
          if(pairRequired&&(bc===0||sc===0))continue;
          const used=set.big*bc+set.small*sc; if(used>wall)continue;
          const leftover=wall-used; const surround=leftover/2; if(surround<MIN_SURROUND)continue;
          const doors=2*bc+sc; if(onlyOdd&&doors%2===0)continue;
          rows.push({set:set.name,big:set.big,small:set.small,bc,sc,used,leftover,surround,doors,priority:set.priority});
        }
      }
    }
    if(rows.length===0){summary.innerHTML="<div class='warn'>ì¡°ê±´ì— ë§ëŠ” ì¡°í•© ì—†ìŒ</div>";return;}

    rows.sort((a,b)=>{
      const diff=Math.abs(a.leftover-b.leftover);
      if(diff<=LEFTOVER_TIE_MM && a.priority!==b.priority) return a.priority-b.priority;  // 1000 ìš°ì„ 
      if(a.leftover!==b.leftover) return a.leftover-b.leftover;                            // ì„œë¼ìš´ë“œ ì–‡ê²Œ
      if(a.doors!==b.doors) return a.doors-b.doors;                                        // ë„ì–´ ì ê²Œ
      return (a.bc+a.sc)-(b.bc+b.sc);                                                      // í†µ ìˆ˜ ì ê²Œ
    });

    topRows=rows.slice(0,3);
    summary.innerHTML="<div class='ok'><b>âœ… ì¶”ì²œ ì¡°í•© Top3 (ì„œë¼ìš´ë“œ ìš°ì„ )</b></div>"+
      topRows.map((r,i)=>`<div class='summary-line'>
        <button class='btn ghost' onclick='choosePlan(${i})'>${i+1}ì•ˆ ì„ íƒ</button>
        ${r.set} Â· í°ì¥${r.bc} ì‘ì€ì¥${r.sc} = ì´ ${(r.bc+r.sc)}í†µ
        Â· ë„ì–´ ${r.doors}ê°œ Â· ì„œë¼ìš´ë“œ ${Math.round(r.surround)}mm/ì¸¡ (ë‚¨ëŠ”í­ ${r.leftover}mm)
      </div>`).join("");
  }

  function choosePlan(idx){
    const r=topRows[idx]; currentPlan=r;
    const unitCount=r.bc+r.sc;
    const wrap=document.getElementById('slotsWrap'); wrap.innerHTML="";
    selections=Array(unitCount).fill("A");

    for(let i=0;i<unitCount;i++){
      const isSmall=i>=r.bc; const letters=isSmall?LETTERS_SMALL:LETTERS_BIG;
      const defaultLetter=letters[0]; selections[i]=defaultLetter;
      const slot=document.createElement('div'); slot.className="slot";
      const chip=isSmall?'<span class="chip">ì‘ì€ì¥</span>':'<span class="chip">í°ì¥</span>';
      const mm=isSmall?r.small:r.big;
      slot.innerHTML=`<h3>${i+1}í†µ ${chip} <span class="muted">${mm}mm</span></h3>`;

      const grid=document.createElement('div'); grid.className="thumb-grid";
      letters.forEach(letter=>{
        const div=document.createElement('div'); div.className="thumb"+(letter===defaultLetter?" active":""); div.dataset.letter=letter;
        const img=document.createElement('img'); img.src=getThumbSrc(letter,false); img.alt=letter; div.appendChild(img);
        div.addEventListener('click',()=>{
          selections[i]=letter; grid.querySelectorAll('.thumb').forEach(t=>t.classList.remove('active'));
          div.classList.add('active'); updateSequences(); renderPreview();
        });
        grid.appendChild(div);
      });
      slot.appendChild(grid); wrap.appendChild(slot);
    }
    document.getElementById('designCard').style.display="block";
    updateSequences(); renderPreview();
    window.scrollTo({ top: document.getElementById('designCard').offsetTop - 10, behavior: 'smooth' });
  }

  // ì´ë¯¸ì§€ ì†ŒìŠ¤: ì‘ì€ì¥ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ ìš°ì„ (s_design_*), ì—†ìœ¼ë©´ í°ì¥ ì´ë¯¸ì§€ë¡œ í´ë°±
  function getImageSrc(letter, isSmall){
    if(isSmall){
      const smallSrc = `s_design_${letter}.png`;
      // ë¯¸ë¦¬ ë¡œë”© ì—†ì´ ë°”ë¡œ ì‹œë„ â†’ onerror ì‹œ í´ë°±
      return smallSrc;
    }
    return `design_${letter}.png`;
  }
  function getThumbSrc(letter){ return THUMBS_BIG[letter] || `design_${letter}.png`; }

  // ====== ì‹œí€€ìŠ¤(ì»´íŒ©íŠ¸Â·ìƒ‰ìƒí‘œì‹œ) ======
  function buildCompactColoredSequence(){
    if(!currentPlan) return { displayHtml:"-", copyText:"-" };

    const surr = Math.round(currentPlan.surround);
    const units = selections.map((ch, i) => {
      const mm = (i < currentPlan.bc) ? currentPlan.big : currentPlan.small;
      const dcm = +(mm/100).toFixed(mm%100?1:0); // 900â†’9 / 850â†’8.5
      return `${dcm}${ch}`;                       // ìˆ«ì ë¨¼ì €: 9A, 8.5B ...
    });

    const copyText = `${surr}L-${units.join("-")}-${surr}R`;

    const black = (t)=>`<span style="color:#111">${t}</span>`;
    const red   = (t)=>`<span style="color:#d00000">${t}</span>`;

    const displayHtml = [
      black(`${surr}L`),
      ...units.map(u=>red(u)),
      black(`${surr}R`)
    ].join(`<span style="color:#999">-</span>`);

    return { displayHtml, copyText };
  }

  function updateSequences(){
    const compact = buildCompactColoredSequence();
    const boxColored = document.getElementById('sequenceBoxCompactColored');
    const boxColoredCopy = document.getElementById('sequenceBoxCompactCopy');
    if(boxColored)      boxColored.innerHTML = compact.displayHtml;
    if(boxColoredCopy)  boxColoredCopy.textContent = compact.copyText;
  }

  // ====== ë¯¸ë¦¬ë³´ê¸° ë Œë” ======
  async function renderPreview(){
    const canvas=document.getElementById('previewCanvas'); const ctx=canvas.getContext('2d');
    const unitH=240, labelH=28;
    if(!currentPlan){canvas.width=0;canvas.height=0;return;}
    const {bc,sc,big,small,surround}=currentPlan;
    const count=selections.length||0; if(count===0){canvas.width=0;canvas.height=0;return;}

    const basePxPerMm=160/1000; let pxPerMm=basePxPerMm;
    const totalMm=bc*big+sc*small;
    let sPx=Math.max(4,Math.round(surround*pxPerMm));
    let totalW=sPx + (totalMm*pxPerMm) + (UNIT_GAP_PX*(count-1)) + sPx;
    const maxCanvasW=1200;
    if(totalW>maxCanvasW){
      const mmPart=(totalMm*pxPerMm)+(2*sPx);
      const scale=(maxCanvasW - UNIT_GAP_PX*(count-1)) / mmPart;
      pxPerMm *= scale;
      sPx=Math.max(3,Math.round(surround*pxPerMm));
      totalW=Math.round(sPx + (totalMm*pxPerMm) + (UNIT_GAP_PX*(count-1)) + sPx);
    }
    canvas.width=totalW; canvas.height=unitH+labelH;

    // ë°°ê²½
    ctx.fillStyle="#fff"; ctx.fillRect(0,0,canvas.width,canvas.height);

    // ì¢Œ ì„œë¼ìš´ë“œ
    let cursorX=0;
    ctx.fillStyle="#f0f0f0"; ctx.fillRect(cursorX,0,sPx,unitH);
    ctx.strokeStyle="#cfcfcf"; ctx.strokeRect(cursorX+0.5,0.5,sPx-1,unitH-1);
    ctx.fillStyle="#555"; ctx.font="12px system-ui"; ctx.textAlign="center";
    ctx.fillText(`L${Math.round(surround)}mm`, cursorX + sPx/2, unitH - 8);
    cursorX+=sPx;

    // ìœ ë‹›ë“¤ (ì™„ì „ ë°€ì°©)
    const unitWidthsMm=selections.map((_,idx)=> idx<bc?big:small);
    for(let i=0;i<count;i++){
      const mm=unitWidthsMm[i];
      const slotW=mm*pxPerMm;
      const letter=selections[i];
      const isSmall = (i>=bc);
      const srcPrimary = getImageSrc(letter, isSmall);
      let drew = false;

      // ì´ë¯¸ì§€ ë¡œë”©(ì‘ì€ì¥ ìš°ì„  â†’ ì‹¤íŒ¨ ì‹œ í°ì¥ í´ë°±)
      try{
        const img=await loadImage(srcPrimary);
        drawUnitImage(ctx, img, slotW, unitH, cursorX, isSmall);
        drew = true;
      }catch(e){
        if(isSmall){
          try{
            const fallback = await loadImage(`design_${letter}.png`);
            drawUnitImage(ctx, fallback, slotW, unitH, cursorX, isSmall);
            drew = true;
          }catch(_){}
        }
      }
      if(!drew){
        // í´ë°± í…Œë‘ë¦¬ + ë¼ë²¨
        ctx.strokeStyle="#999"; ctx.strokeRect(cursorX+4,4,slotW-8,unitH-8);
        ctx.fillStyle="#333"; ctx.font="bold 22px system-ui"; ctx.textAlign="center";
        ctx.fillText(letter, cursorX + slotW/2, unitH/2 + 8);
      }

      // í°ì¥ ì¤‘ì•™ 3mm ì ì„ (ì‹œê°í™”ë§Œ)
      if(!isSmall){
        const gapPx=Math.max(1, DOOR_GAP_MM * pxPerMm);
        const mid=cursorX + slotW/2;
        ctx.save(); ctx.strokeStyle="#8aa3ff"; ctx.lineWidth=1; ctx.setLineDash([4,4]);
        ctx.beginPath(); ctx.moveTo(Math.round(mid-gapPx/2)+0.5, 0); ctx.lineTo(Math.round(mid-gapPx/2)+0.5, unitH); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(Math.round(mid+gapPx/2)+0.5, 0); ctx.lineTo(Math.round(mid+gapPx/2)+0.5, unitH); ctx.stroke();
        ctx.restore();
      }

      // í•˜ë‹¨ í­ ë¼ë²¨
      ctx.fillStyle="#111"; ctx.font="12px system-ui"; ctx.textAlign="center";
      ctx.fillText(`${mm}mm`, cursorX + slotW/2, unitH + labelH - 8);

      cursorX += slotW + (i<count-1 ? UNIT_GAP_PX : 0);
    }

    // ìš° ì„œë¼ìš´ë“œ
    ctx.fillStyle="#f0f0f0"; ctx.fillRect(cursorX,0,sPx,unitH);
    ctx.strokeStyle="#cfcfcf"; ctx.strokeRect(cursorX+0.5,0.5,sPx-1,unitH-1);
    ctx.fillStyle="#555"; ctx.font="12px system-ui"; ctx.textAlign="center";
    ctx.fillText(`R${Math.round(surround)}mm`, cursorX + sPx/2, unitH - 8);
  }

  function drawUnitImage(ctx, img, slotW, unitH, cursorX, isSmall){
    if(!isSmall){
      // í°ì¥: ë¹„ìœ¨ ìœ ì§€
      const ratio=Math.min(slotW/img.width, unitH/img.height);
      const w=Math.round(img.width*ratio);
      const h=Math.round(img.height*ratio);
      const x=cursorX + Math.round((slotW - w)/2);
      const y=Math.round((unitH - h)/2);
      ctx.drawImage(img, x, y, w, h);
    } else {
      // ì‘ì€ì¥: ë†’ì´ ë™ì¼, í­ë§Œ ì ˆë°˜ â†’ ê°•ì œ ë§ì¶¤
      ctx.drawImage(img, cursorX, 0, slotW, unitH);
    }
  }

  function loadImage(src){
    return new Promise((res, rej)=>{
      const img=new Image();
      img.onload=()=>res(img);
      img.onerror=()=>rej(new Error("load fail:"+src));
      img.src=src;
    });
  }

  function downloadPreview(){
    const canvas=document.getElementById('previewCanvas');
    if(!canvas||canvas.width===0){alert("ë¨¼ì € ì¶”ì²œì•ˆì„ ì„ íƒí•˜ê³  ë””ìì¸ì„ ê³ ë¥´ì„¸ìš”.");return;}
    const a=document.createElement('a');
    a.href=canvas.toDataURL("image/png");
    a.download="ìµœì¢…ì¡°ë¦½ë¯¸ë¦¬ë³´ê¸°.png";
    a.click();
  }

  function copyCompact(){
    const t=document.getElementById('sequenceBoxCompactCopy').textContent;
    if(!t||t==='-'){alert('ë¨¼ì € ì¶”ì²œì•ˆì„ ì„ íƒí•˜ê³  ë””ìì¸ì„ ê³ ë¥´ì„¸ìš”.');return;}
    navigator.clipboard.writeText(t).then(()=>alert("ë³µì‚¬ë¨"));
  }
</script>
</body>
</html>
